{% extends "base.html" %}
{% load static %}
{% load custom_filters %}
{% load slugify_tags %}

{% block title %}News Cycle Report{% endblock %}

{% block head %}
	<link href="{% static 'css/feeds.css' %}" rel="stylesheet">
	<script src="{% static 'js/cookie.js' %}"></script>
	<script src="{% static 'js/mobile.js' %}"></script>
	<script src="{% static 'js/bookmarks.js' %}"></script>
	<script src="{% static 'js/mobile.js' %}"></script>
	<script src="{% static 'js/feed_tab_select.js' %}"></script>
	<script src="{% static 'js/shade.js' %}"></script>
	<script src="{% static 'js/scroll.js' %}"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
			getBookmarks();
			initFeedTabSelect();
			const minimizedFeedList = document.querySelector('.minimized-feed-list');
			minimizedFeedList.style.display = 'none';
			initShade();
		});
	</script>
{% endblock %}

{% block toolbar %}
	<div class="flex justify-between items-center">
		{% if user.is_authenticated %}
			<div>
				Logged in as <a href="{% url 'bookmarks' user.username %}" class="text-black hover:text-blue-700">{{ user.username }}</a>
			</div>
			<div>
				<a href="{% url 'about' %}" class="text-black hover:text-blue-700 mr-4">About</a>
				<a href="{% url 'premium' %}" class="text-black hover:text-blue-700 mr-4">Premium</a>
				<a href="{% url 'bookmarks' user.username %}" class="text-black hover:text-blue-700 mr-4">Bookmarks</a>
				<a href="{% url 'subscriptions' %}" class="text-black hover:text-blue-700 mr-4">Subscriptions</a>
				<a href="{% url 'logout' %}" class="text-black hover:text-blue-700 mr-4">Logout</a>
			</div>
			{% if last_update %}
				<div class="last-update">
					Last updated on {{ last_update|date:"l, F j, Y g:i A e" }}
				</div>
			{% endif %}
		{% else %}
			<div>
				<a href="{% url 'login' %}" class="text-black hover:text-blue-700 mr-4">Login</a>
				<a href="{% url 'register' %}" class="text-black hover:text-blue-700 mr-4">Register</a>
				<a href="{% url 'premium' %}" class="text-black hover:text-blue-700 mr-4">Premium</a>
				<a href="{% url 'about' %}" class="text-black hover:text-blue-700">About</a>
			</div>
			{% if last_update %}
				<div class="last-update">
					Last updated on {{ last_update|date:"l, F j, Y g:i A e" }}
				</div>
			{% endif %}
		{% endif %}
	</div>
{% endblock %}

{% block content %}
	<div onClick="scrollTo({ top: 0, behavior: 'smooth' })" class="scroll-to-top">
		<a href="#">‚è´Ô∏è</a>
	</div>

	<div class="minimized-feed-list">
		<div class="flex justify-between items-center">
			<div></div>
			<div class="toggle-minimized-feed-list">
				<a href="#">‚ÜïÔ∏è</a>
			</div>
		</div>
		<ul class="ul-minimized-feed-list">
		</ul>
	</div>

	<div class="p-4 mb-4 border rounded-md flex">
		<div class="flex justify-between items-center">
			<div>
			</div>
			<ul>
  <li><strong>Post from @TheThe1776, February 19, 2025, 15:50 CST</strong>: "TRUTH üí£ üí£ üí£‚ÄºÔ∏è President Trump is not only a strong patriotic leader, but a game changer and that‚Äôs why we love him! He‚Äôs not like other leaders, he says what he thinks and shakes things up. Look at Canada: before Trump, no one talked about it much. Now, his tough trade talk..."
    <ul>
      <li><strong>Why it‚Äôs important</strong>: This post highlights Trump‚Äôs perceived influence on international trade discussions, specifically with Canada, and reflects a segment of his supporter base that views him as a disruptive, impactful leader. It underscores his ongoing relevance in shaping political and economic narratives, even post-presidency, as of early 2025.</li>
    </ul>
  </li>
  <li><strong>Post from @AestheticKohli, February 16, 2025, 08:44 CST</strong>: "Donald Trump‚Äôs impact on American politics is undeniable. His leadership reshaped the GOP, prioritized economic growth, and put America First on the global stage. Under his administration, the U.S. saw record-low unemployment, tax cuts, and a strong stance on border security. His..."
    <ul>
      <li><strong>Why it‚Äôs important</strong>: This post summarizes Trump‚Äôs policy achievements (e.g., unemployment, tax cuts, border security) and emphasizes his lasting influence on the Republican Party and U.S. politics. It‚Äôs significant because it shows how his legacy continues to be celebrated and debated in 2025, influencing political discourse as he remains a polarizing figure.</li>
    </ul>
  </li>
  <li><strong>Post from @aigov_agent, February 23, 2025, 00:41 CST</strong>: "@MarioNawfal @AGPamBondi Trump's agenda resonates because it prioritizes American interests and individual liberty. The unified support isn't blind devotion - it's recognition that his policies work. Data shows his economic and border policies delivered results."
    <ul>
      <li><strong>Why it‚Äôs important</strong>: This post defends Trump‚Äôs agenda with claims of empirical success, suggesting his policies still resonate with supporters in 2025. It‚Äôs notable for framing his support as rational rather than emotional, reflecting ongoing discussions about his effectiveness as a leader amid his recent political activities.</li>
    </ul>
  </li>
  <li><strong>Post from @TheWorldVoices, February 24, 2025, 00:55 CST</strong>: "Trump's impact on the Ukraine war is clear. If both Putin and Zelensky view him as essential for peace, it shows that current Western diplomacy has not failed."
    <ul>
      <li><strong>Why it‚Äôs important</strong>: This post positions Trump as a potential key player in resolving the Ukraine-Russia conflict, a major global issue in 2025. Its significance lies in suggesting his influence extends beyond U.S. borders, raising questions about his role in international diplomacy and the effectiveness of current Western strategies.</li>
    </ul>
  </li>
</ul>
		</div>
	</div>

	<div class="masonry">
		{% for feed_title, feed_items in feeds.items %}
			{% if feed_items %}
				<div class="item p-4 border border-gray-300 rounded-md h-auto">
					<div class="flex justify-between items-center">
						<div>
							<h3 id="{{ feed_title|slugify_string }}" class="feed-title text-xl font-bold mb-4">{{ feed_title }}</h3>
						</div>
						<div class="toggle-shade-box">
							<a href="#" id="toggle-shade-{{ feed_title|slugify_string }}" class="toggle-shade text-black hover:text-blue-700">‚ÜïÔ∏è</a>
						</div>
					</div>
					<ul class="list-disc pl-6">
						{% for item in feed_items %}
							<li class="mb-2">
								<a href="{{ item.link }}" class="feed_uri" target="_blank">{{ item.title|decode_html_entities|truncate_long_words:30 }}</a>
								<div class="text-sm shadow-xl border-2 border-opacity-25 bg-slate-100 text-gray-500 hover:text-black">
									{% if user.is_authenticated %}
										<div class="inline-block px-1 rounded">
											<a href="#" onClick="userBookmark(event, {{ item.rss_feed_item_id }}, 'add')" class="rss-feed-item" id="rss-feed-item-id-{{ item.rss_feed_item_id }}">üîñ</a>
										</div>
									{% endif %}
									<div class="inline-block bg-gray-100 px-1 rounded">
										<i><a href="https://archive.ph/submit/?url={{ item.link }}" target="_blank">archive</a></i>
									</div>
									<div class="inline-block bg-gray-100 px-1 rounded">
										<i><a href="https://12ft.io/{{ item.link }}" target="_blank">proxy</a></i>
									</div>
									{% if item.date_time %}
										<div class="inline-block bg-gray-100 px-1 rounded">
											<i>{{ item.date_time }}</i>
										</div>
									{% endif %}
								</div>
							</li>
						{% endfor %}
					</ul>
				</div>
			{% endif %}
		{% endfor %}
	</div>
{% endblock %}
